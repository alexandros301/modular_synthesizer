#N canvas 38 244 452 314 10;
#X declare -path ../../generic_abstractions;
#X obj 39 215 varShapesOsc~;
#N canvas 335 51 501 484 freq 0;
#X obj 111 387 *~;
#X obj 270 348 pack f 20;
#X obj 32 434 outlet~;
#X obj 32 156 pack f 15;
#X obj 32 178 line~;
#X obj 32 230 *~;
#X obj 111 180 r~;
#X obj 32 134 r \$1-1st_knob;
#X obj 270 326 r \$1-1st_inlet;
#X obj 155 346 *~;
#X obj 270 370 t f f;
#X obj 50 208 == 0;
#X obj 111 157 r \$1-1st_input;
#X obj 111 346 *~;
#N canvas 0 51 382 350 set_output 0;
#X obj 36 56 t b f;
#X obj 36 235 == 0;
#X obj 36 80 +;
#X obj 59 185 == 1;
#X obj 59 207 outlet get_tabs;
#X obj 36 257 outlet get_sig;
#X obj 36 33 r \$1-midi_connect;
#X obj 36 102 t f f f;
#X obj 82 135 == 2;
#X obj 82 157 outlet get_midi;
#X obj 68 80 inlet;
#X connect 0 0 2 0;
#X connect 0 1 2 1;
#X connect 1 0 5 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 6 0 0 0;
#X connect 7 0 1 0;
#X connect 7 1 3 0;
#X connect 7 2 8 0;
#X connect 8 0 9 0;
#X connect 10 0 2 0;
#X restore 129 320 pd set_output;
#X text 28 9 if a signal is connected to the frequency inlet \, that
signal will control the frequency of this oscillator \, if only one
instance of this oscillator is used. otherwise we'll use that incoming
signal to store values for the frequencies of all instances and read
from the table. if this module is connected to the midi module \, we'll
use the midi voice frequency instead of the incoming signal \, or the
values from the frequencies table;
#X obj 199 346 *~;
#X obj 199 277 r \$2-midi_freq;
#X obj 199 299 sig~;
#X obj 129 210 r \$1-freq_tab_or_knob;
#N canvas 0 51 324 288 read_tab_freq 0;
#X obj 46 86 \$2;
#X obj 46 151 pack f f;
#X obj 46 173 line~;
#X obj 46 108 tabread \$1-frequencies;
#X obj 46 65 inlet;
#X obj 46 195 outlet~;
#X obj 99 130 r \$1-ramp_time;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 0 0;
#X connect 6 0 1 1;
#X restore 155 254 pd read_tab_freq;
#X obj 129 232 t b b;
#X connect 0 0 2 0;
#X connect 1 0 10 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 13 0;
#X connect 7 0 3 0;
#X connect 8 0 1 0;
#X connect 9 0 0 0;
#X connect 10 0 0 1;
#X connect 10 1 11 0;
#X connect 11 0 5 1;
#X connect 12 0 6 0;
#X connect 13 0 0 0;
#X connect 14 0 13 1;
#X connect 14 1 9 1;
#X connect 14 2 16 1;
#X connect 16 0 0 0;
#X connect 17 0 18 0;
#X connect 18 0 16 0;
#X connect 19 0 21 0;
#X connect 20 0 9 0;
#X connect 21 0 14 0;
#X connect 21 1 20 0;
#X restore 39 49 pd freq;
#N canvas 108 162 347 207 phase 0;
#X obj 161 47 pack f 20;
#X obj 161 69 line~;
#X obj 47 85 *~;
#X obj 47 153 *~;
#X obj 101 115 pack f 20;
#X obj 101 137 line~;
#X obj 47 175 outlet~;
#X obj 47 62 r~;
#X obj 47 39 r \$1-2nd_input;
#X obj 101 93 r \$1-2nd_inlet;
#X obj 161 27 r \$1-2nd_knob;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 3 1;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 9 0 4 0;
#X connect 10 0 0 0;
#X restore 54 72 pd phase;
#N canvas 151 144 540 286 switch 0;
#X obj 17 41 pack f 20;
#X obj 17 63 line~;
#X obj 17 232 outlet~;
#X obj 17 208 clip~ 0 1;
#X obj 95 123 *~;
#X obj 232 107 pack f 20;
#X obj 232 129 line~;
#X obj 35 109 *~ -1;
#X obj 35 131 +~ 1;
#X obj 17 156 *~;
#X obj 95 145 *~;
#X text 124 153 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 113 99 r~;
#X obj 232 84 r \$1-3rd_inlet;
#X obj 113 77 r \$1-3rd_input;
#X obj 17 19 r \$1-3rd_knob;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 1 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 10 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 10 1;
#X connect 7 0 8 0;
#X connect 8 0 9 1;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 12 0 4 1;
#X connect 13 0 5 0;
#X connect 14 0 12 0;
#X connect 15 0 0 0;
#X restore 68 98 pd switch;
#N canvas 37 173 600 344 break 0;
#X obj 34 44 pack f 20;
#X obj 34 66 line~;
#X obj 34 270 outlet~;
#X obj 34 248 clip~ 0 1;
#X obj 113 160 *~;
#X obj 240 167 pack f 20;
#X obj 240 189 line~;
#X obj 52 160 *~ -1;
#X obj 52 182 +~ 1;
#X obj 34 207 *~;
#X obj 113 205 *~;
#X obj 113 93 *~ 0.5;
#X obj 113 182 +~ 0.5;
#X text 146 213 if a signal is connected to this control input \, the
respective knob becomes the index of the signal with the control signal
centered at 0.5;
#X obj 132 137 r~;
#X obj 34 22 r \$1-4th_knob;
#X obj 132 115 r \$1-4th_input;
#X obj 240 144 r \$1-4th_inlet;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 1 0 11 0;
#X connect 3 0 2 0;
#X connect 4 0 12 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 10 1;
#X connect 7 0 8 0;
#X connect 8 0 9 1;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 11 0 4 0;
#X connect 12 0 10 0;
#X connect 14 0 4 1;
#X connect 15 0 0 0;
#X connect 16 0 14 0;
#X connect 17 0 5 0;
#X restore 84 125 pd break;
#N canvas 198 150 597 337 risePow 0;
#X obj 21 71 pack f 20;
#X obj 21 93 line~;
#X obj 21 282 outlet~;
#X obj 21 259 clip~ 0 1000;
#X obj 99 167 *~;
#X obj 226 173 pack f 20;
#X obj 226 195 line~;
#X obj 40 160 *~ -1;
#X obj 40 182 +~ 1;
#X obj 21 207 *~;
#X obj 99 211 *~;
#X obj 99 189 +~ 0.5;
#X text 131 215 if a signal is connected to this control input \, the
respective knob becomes the index of the signal \, with the control
signal going till 0.5 and no lower;
#X obj 118 143 r~;
#X obj 21 49 r \$1-5th_knob;
#X obj 118 121 r \$1-5th_input;
#X obj 226 149 r \$1-5th_inlet;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 1 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 11 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 10 1;
#X connect 7 0 8 0;
#X connect 8 0 9 1;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 11 0 10 0;
#X connect 13 0 4 1;
#X connect 14 0 0 0;
#X connect 15 0 13 0;
#X connect 16 0 5 0;
#X restore 97 154 pd risePow;
#N canvas 350 186 576 330 fallPow 0;
#X obj 15 42 pack f 20;
#X obj 15 64 line~;
#X obj 15 241 outlet~;
#X obj 15 218 clip~ 0 1000;
#X obj 93 117 *~;
#X obj 221 124 pack f 20;
#X obj 221 146 line~;
#X obj 34 113 *~ -1;
#X obj 34 135 +~ 1;
#X obj 15 160 *~;
#X obj 93 162 *~;
#X obj 93 139 +~ 0.5;
#X text 123 167 if a signal is connected to this control input \, the
respective knob becomes the index of the signal \, with the control
signal going till 0.5 and no lower;
#X obj 112 94 r~;
#X obj 15 20 r \$1-6th_knob;
#X obj 112 72 r \$1-6th_input;
#X obj 221 99 r \$1-6th_inlet;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 1 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 11 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 10 1;
#X connect 7 0 8 0;
#X connect 8 0 9 1;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 11 0 10 0;
#X connect 13 0 4 1;
#X connect 14 0 0 0;
#X connect 15 0 13 0;
#X connect 16 0 5 0;
#X restore 112 184 pd fallPow;
#X obj 39 261 throw~ \$1-sum;
#X obj 39 22 declare -path ../../generic_abstractions;
#N canvas 42 220 566 455 amp 0;
#X obj 37 93 inlet~;
#X obj 37 195 *~;
#X obj 37 417 outlet~;
#X obj 143 155 r~;
#X obj 399 237 pack f 20;
#X obj 399 259 t f f;
#X obj 399 215 r \$1-7th_inlet;
#X obj 143 356 *~;
#X obj 186 308 *~;
#X obj 55 128 == 0;
#X obj 55 150 pack f 15;
#X obj 55 172 line~;
#X obj 431 318 pack f 15;
#X obj 431 340 line~;
#X obj 143 132 r \$1-7th_input;
#X obj 143 308 *~;
#X text 47 17 here we apply the same technique as we do with the frequency
of this module \, to choose between full amplitude (there's no knob
controlling the amplitude) \, values from a table \, or midi velocity
values;
#N canvas 0 51 362 451 set_output 0;
#X obj 36 56 t b f;
#X obj 36 314 == 0;
#X obj 36 80 +;
#X obj 59 225 == 1;
#X obj 36 33 r \$1-midi_connect;
#X obj 36 102 t f f f;
#X obj 82 135 == 2;
#X obj 36 336 pack f 15;
#X obj 36 358 line~;
#X obj 36 380 outlet~ get_sig;
#X obj 59 292 outlet~ get_tabs;
#X obj 59 247 pack f 15;
#X obj 59 269 line~;
#X obj 82 157 pack f 15;
#X obj 82 179 line~;
#X obj 82 201 outlet~ get_midi;
#X obj 65 80 inlet;
#X connect 0 0 2 0;
#X connect 0 1 2 1;
#X connect 1 0 7 0;
#X connect 2 0 5 0;
#X connect 3 0 11 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 5 1 3 0;
#X connect 5 2 6 0;
#X connect 6 0 13 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 2 0;
#X restore 161 279 pd set_output;
#X obj 232 305 *~;
#N canvas 628 183 363 304 midi_vel_and_adsr 0;
#X obj 31 36 r \$2-midi_amp;
#X obj 129 148 pack f 15;
#N canvas 104 139 571 457 adsr 0;
#X obj 284 93 timer;
#X obj 336 101 +;
#X obj 336 76 f;
#X obj 284 59 t b b;
#X obj 284 186 >= 0;
#X obj 284 161 t f f;
#X obj 284 315 f;
#X msg 284 338 0 \$1;
#X obj 421 243 f;
#X obj 421 268 pack f f f;
#X obj 284 211 sel 0 1;
#X msg 421 297 \$1 \$2 \, 0 \$3 \$2;
#X obj 454 178 min;
#X obj 454 199 min;
#X obj 108 206 *;
#X obj 54 189 t f f;
#X obj 439 222 *;
#X obj 284 33 sel 1 0;
#X obj 284 12 > 0;
#X obj 22 134 sel 0;
#X obj 81 111 r midi-attack;
#X obj 126 158 r midi-sustain;
#X obj 135 207 r midi-decay;
#X obj 54 255 pack f f f f;
#X msg 54 280 \$1 \$2 \, \$3 \$4 \$2;
#X obj 284 118 swap;
#X obj 284 140 -;
#X obj 81 133 t f f;
#X obj 135 229 t f f;
#X obj 440 84 t f f;
#X obj 302 270 r midi-release;
#X obj 302 293 t f f f;
#X obj 22 111 t f f f;
#X obj 126 180 t f f;
#X obj 22 87 inlet;
#X obj 284 395 outlet;
#X connect 0 0 25 0;
#X connect 1 0 25 1;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 3 1 2 0;
#X connect 4 0 10 0;
#X connect 5 0 4 0;
#X connect 5 1 12 0;
#X connect 6 0 7 0;
#X connect 7 0 35 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 10 0 6 0;
#X connect 10 1 8 0;
#X connect 11 0 35 0;
#X connect 12 0 13 0;
#X connect 13 0 9 1;
#X connect 14 0 23 2;
#X connect 15 0 23 0;
#X connect 15 1 14 0;
#X connect 16 0 8 1;
#X connect 17 0 3 0;
#X connect 17 1 0 1;
#X connect 18 0 17 0;
#X connect 19 1 15 0;
#X connect 20 0 27 0;
#X connect 21 0 33 0;
#X connect 22 0 28 0;
#X connect 23 0 24 0;
#X connect 24 0 35 0;
#X connect 25 0 26 0;
#X connect 25 1 26 1;
#X connect 26 0 5 0;
#X connect 27 0 23 1;
#X connect 27 1 2 1;
#X connect 28 0 23 3;
#X connect 28 1 29 0;
#X connect 29 0 1 1;
#X connect 29 1 12 1;
#X connect 30 0 31 0;
#X connect 31 0 6 1;
#X connect 31 1 13 1;
#X connect 31 2 9 2;
#X connect 32 0 19 0;
#X connect 32 1 18 0;
#X connect 32 2 16 0;
#X connect 33 0 14 1;
#X connect 33 1 16 1;
#X connect 34 0 32 0;
#X restore 31 158 pd adsr;
#X obj 31 263 outlet~;
#X obj 31 107 t f f;
#X obj 129 124 spigot;
#X obj 31 135 spigot;
#X obj 31 237 vline~;
#X obj 70 60 r adsr_active;
#X obj 70 82 t f f;
#X obj 168 99 == 0;
#X connect 0 0 4 0;
#X connect 1 0 7 0;
#X connect 2 0 7 0;
#X connect 4 0 6 0;
#X connect 4 1 5 0;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X connect 7 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 6 1;
#X connect 9 1 10 0;
#X connect 10 0 5 1;
#X restore 232 251 pd midi_vel_and_adsr;
#X obj 161 202 t b b;
#X obj 161 180 r \$1-amp_tab_or_knob;
#N canvas 179 126 324 288 read_tab_amp 0;
#X obj 46 86 \$2;
#X obj 46 151 pack f f;
#X obj 46 173 line~;
#X obj 46 65 inlet;
#X obj 46 195 outlet~;
#X obj 99 130 r \$1-ramp_time;
#X obj 46 108 tabread \$1-amplitudes;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X restore 186 224 pd read_tab_amp;
#X connect 0 0 7 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 15 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 5 1 12 0;
#X connect 6 0 4 0;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 1 1;
#X connect 12 0 13 0;
#X connect 13 0 7 1;
#X connect 14 0 3 0;
#X connect 15 0 7 0;
#X connect 17 0 15 1;
#X connect 17 1 8 1;
#X connect 17 2 18 1;
#X connect 18 0 7 0;
#X connect 19 0 18 0;
#X connect 20 0 17 0;
#X connect 20 1 22 0;
#X connect 21 0 20 0;
#X connect 22 0 8 0;
#X restore 39 238 pd amp;
#X connect 0 0 9 0;
#X connect 1 0 0 0;
#X connect 2 0 0 1;
#X connect 3 0 0 2;
#X connect 4 0 0 3;
#X connect 5 0 0 4;
#X connect 6 0 0 5;
#X connect 9 0 7 0;
