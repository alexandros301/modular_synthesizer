#N canvas 594 99 520 428 10;
#X declare -path ../generic_abstractions -path ./module_instances;
#X obj 19 266 *~;
#X obj 19 309 +~;
#X obj 65 228 pack f 20;
#X obj 65 250 line~;
#X obj 188 227 * -1;
#X obj 188 249 + 1;
#X obj 188 271 pack f 20;
#X obj 188 293 line~;
#X obj 292 202 switch~;
#X obj 19 381 throw~;
#X obj 53 347 route 0;
#X obj 292 157 r \$0-1st_outlet;
#X obj 53 325 set_outputs \$4 \$5;
#X obj 19 125 catch~ \$0-sum;
#X obj 19 173 *~;
#X obj 19 11 declare -path ../generic_abstractions -path ./module_instances
;
#X text 221 71 we're forcing the order of bangs here;
#N canvas 76 169 378 240 \$0-switches 0;
#X obj 21 15 r switches;
#X obj 21 37 route \$1;
#X obj 45 157 s \$0-new_freq;
#X obj 21 185 outlet;
#X obj 21 59 route 1 2 3;
#X obj 45 135 sel 1;
#X obj 70 85 sel 1;
#X obj 70 107 s \$0-new_amp;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 4 0 3 0;
#X connect 4 1 5 0;
#X connect 4 2 6 0;
#X connect 5 0 2 0;
#X connect 6 0 7 0;
#X restore 65 180 pd \$0-switches;
#N canvas 159 51 814 670 \$0-scale_output 0;
#X obj 349 120 r midi_event;
#X obj 349 163 f;
#X obj 199 531 pow -1;
#X obj 199 561 pack f 15;
#X obj 199 583 line~;
#X obj 199 605 outlet~;
#X obj 58 19 r \$0-midi_connect;
#X obj 58 41 t f f;
#X obj 349 142 spigot;
#X obj 58 63 == 0;
#X obj 19 142 spigot;
#X obj 19 281 t f b;
#X obj 44 375 +;
#X obj 74 376 f;
#X msg 62 353 0;
#X obj 44 326 tabread \$0-amplitudes;
#X obj 19 186 t f f;
#X obj 51 209 > 1;
#X obj 51 231 t f f;
#X obj 19 256 spigot;
#X obj 83 256 sel 0;
#X msg 83 278 1;
#X text 80 296 if only one instace \, multiply by 1;
#X text 184 15 check if this module is connected to the midi module
and choose amplitude table accordingly;
#X obj 19 164 f;
#X obj 193 103 r \$0-num_voices;
#X obj 349 281 t f b;
#X obj 374 375 +;
#X obj 404 376 f;
#X msg 392 353 0;
#X obj 349 186 t f f;
#X obj 381 209 > 1;
#X obj 381 231 t f f;
#X obj 349 256 spigot;
#X obj 413 256 sel 0;
#X msg 413 278 1;
#X obj 374 326 tabread \$0-midi_amps;
#X obj 193 125 t f f;
#X obj 19 303 loop;
#X obj 349 303 loop;
#X obj 318 438 r \$0-7th_inlet;
#X obj 318 460 t f f;
#X obj 257 515 spigot;
#X obj 199 508 spigot;
#X obj 264 491 t f f;
#X obj 350 482 sel 0;
#X msg 350 504 1;
#X text 361 461 if nothing is connected to the amp inlet \, use full
amplitude;
#X obj 19 120 r \$0-set_new_amp;
#X connect 0 0 8 0;
#X connect 1 0 30 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 7 1 8 1;
#X connect 8 0 1 0;
#X connect 9 0 10 1;
#X connect 10 0 24 0;
#X connect 11 0 38 0;
#X connect 11 1 14 0;
#X connect 12 0 13 0;
#X connect 12 0 43 0;
#X connect 13 0 12 1;
#X connect 14 0 12 1;
#X connect 15 0 12 0;
#X connect 16 0 19 0;
#X connect 16 1 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 1;
#X connect 18 1 20 0;
#X connect 19 0 11 0;
#X connect 20 0 21 0;
#X connect 21 0 42 0;
#X connect 24 0 16 0;
#X connect 25 0 37 0;
#X connect 26 0 39 0;
#X connect 26 1 29 0;
#X connect 27 0 28 0;
#X connect 27 0 43 0;
#X connect 28 0 27 1;
#X connect 29 0 27 1;
#X connect 30 0 33 0;
#X connect 30 1 31 0;
#X connect 31 0 32 0;
#X connect 32 0 33 1;
#X connect 32 1 34 0;
#X connect 33 0 26 0;
#X connect 34 0 35 0;
#X connect 35 0 42 0;
#X connect 36 0 27 0;
#X connect 37 0 24 1;
#X connect 37 1 1 1;
#X connect 38 1 15 0;
#X connect 39 1 36 0;
#X connect 40 0 41 0;
#X connect 41 0 44 0;
#X connect 41 1 45 0;
#X connect 42 0 3 0;
#X connect 43 0 2 0;
#X connect 44 0 43 1;
#X connect 44 1 42 1;
#X connect 45 0 46 0;
#X connect 46 0 3 0;
#X connect 48 0 10 0;
#X restore 37 151 pd \$0-scale_output;
#N canvas 150 604 289 156 \$0-tables 0;
#X obj 20 10 table \$0-freq_wave 512;
#X obj 20 30 table \$0-frequencies;
#X obj 20 70 table \$0-amplitudes;
#X obj 20 91 table \$0-midi_amps;
#X obj 20 50 table \$0-amp_wave 512;
#X restore 292 292 pd \$0-tables;
#N canvas 514 86 732 566 \$0-write_amp_values 0;
#X obj 42 444 f;
#X msg 60 422 0;
#X obj 61 185 samplerate~;
#X obj 17 224 swap;
#X obj 17 246 /;
#X obj 72 444 +;
#X obj 17 311 /;
#X obj 17 202 f;
#X obj 17 78 t b b;
#X text 140 71 write the incoming signal to a table;
#X text 56 237 then calculate how many sample one period takes;
#X obj 42 398 t b f;
#X obj 17 355 f;
#X obj 17 333 t b f b;
#X obj 61 162 loadbang;
#X text 76 307 and calculate index jump according the the number of
voices \, to read and store values from the stored signal \, to the
amplitudes table;
#X obj 17 117 del;
#X obj 61 207 t f f;
#X obj 253 178 /;
#X obj 253 200 * 1000;
#X text 305 175 set array's size in ms to delay the rest of the process
after we store a wave to the table;
#X obj 89 95 tabwrite~ \$0-amp_wave;
#X obj 253 156 array size \$0-amp_wave;
#X obj 17 10 r \$0-new_amp;
#X obj 35 268 r \$0-num_voices;
#X obj 42 466 tabread \$0-amp_wave;
#X obj 42 492 tabwrite \$0-amplitudes;
#X obj 89 68 r~;
#X obj 89 46 r \$0-7th_input;
#X obj 35 140 r \$3-incoming_amp_freq;
#X obj 17 377 loop;
#X obj 35 290 t f f;
#X obj 17 516 s \$0-set_new_amp;
#X obj 253 133 t b f;
#X connect 0 0 5 0;
#X connect 0 0 25 0;
#X connect 1 0 0 1;
#X connect 2 0 17 0;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 4 0 6 0;
#X connect 5 0 0 1;
#X connect 6 0 13 0;
#X connect 7 0 3 0;
#X connect 8 0 16 0;
#X connect 8 1 21 0;
#X connect 11 0 0 0;
#X connect 11 1 26 1;
#X connect 12 0 30 0;
#X connect 13 0 12 0;
#X connect 13 1 5 1;
#X connect 13 2 1 0;
#X connect 14 0 2 0;
#X connect 16 0 7 0;
#X connect 17 0 3 1;
#X connect 17 1 33 0;
#X connect 18 0 19 0;
#X connect 19 0 16 1;
#X connect 22 0 18 0;
#X connect 23 0 8 0;
#X connect 24 0 31 0;
#X connect 25 0 26 0;
#X connect 27 0 21 0;
#X connect 28 0 27 0;
#X connect 29 0 7 1;
#X connect 30 0 32 0;
#X connect 30 1 11 0;
#X connect 31 0 6 1;
#X connect 31 1 12 1;
#X connect 33 0 22 0;
#X connect 33 1 18 1;
#X restore 292 270 pd \$0-write_amp_values;
#N canvas 78 85 740 566 \$0-write_freq_values 0;
#X obj 52 442 f;
#X msg 70 420 0;
#X obj 71 183 samplerate~;
#X obj 27 222 swap;
#X obj 27 244 /;
#X obj 82 442 +;
#X obj 27 309 /;
#X obj 27 200 f;
#X obj 27 76 t b b;
#X text 150 69 write the incoming signal to a table;
#X text 66 235 then calculate how many sample one period takes;
#X obj 52 396 t b f;
#X obj 27 353 f;
#X obj 27 331 t b f b;
#X obj 265 176 /;
#X obj 265 198 * 1000;
#X text 317 173 set array's size in ms to delay the rest of the process
after we store a wave to the table;
#X obj 27 111 del;
#X obj 71 160 loadbang;
#X obj 71 205 t f f;
#X text 86 305 and calculate index jump according the the number of
voices \, to read and store values of a full period from the stored
signal \, to the frequencies table;
#X obj 99 93 tabwrite~ \$0-freq_wave;
#X obj 265 154 array size \$0-freq_wave;
#X obj 52 464 tabread \$0-freq_wave;
#X obj 52 490 tabwrite \$0-frequencies;
#X obj 27 18 r \$0-new_freq;
#X obj 45 266 r \$0-num_voices;
#X obj 99 66 r~;
#X obj 99 43 r \$0-1st_input;
#X obj 265 132 t b f;
#X obj 45 135 r \$3-incoming_freq;
#X obj 27 375 loop;
#X obj 45 288 t f f;
#X obj 27 514 s \$0-set_new_freq;
#X connect 0 0 5 0;
#X connect 0 0 23 0;
#X connect 1 0 0 1;
#X connect 2 0 19 0;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 4 0 6 0;
#X connect 5 0 0 1;
#X connect 6 0 13 0;
#X connect 7 0 3 0;
#X connect 8 0 17 0;
#X connect 8 1 21 0;
#X connect 11 0 0 0;
#X connect 11 1 24 1;
#X connect 12 0 31 0;
#X connect 13 0 12 0;
#X connect 13 1 5 1;
#X connect 13 2 1 0;
#X connect 14 0 15 0;
#X connect 15 0 17 1;
#X connect 17 0 7 0;
#X connect 18 0 2 0;
#X connect 19 0 3 1;
#X connect 19 1 29 0;
#X connect 22 0 14 0;
#X connect 23 0 24 0;
#X connect 25 0 8 0;
#X connect 26 0 32 0;
#X connect 27 0 21 0;
#X connect 28 0 27 0;
#X connect 29 0 22 0;
#X connect 29 1 14 1;
#X connect 30 0 7 1;
#X connect 31 0 33 0;
#X connect 31 1 11 0;
#X connect 32 0 6 1;
#X connect 32 1 12 1;
#X restore 292 247 pd \$0-write_freq_values;
#N canvas 697 223 321 182 \$0-collect-midi-amps 0;
#X obj 36 27 r midi-amps;
#X obj 36 73 spigot;
#X obj 36 95 unpack;
#X obj 36 127 tabwrite \$0-midi_amps;
#X obj 75 51 r \$0-midi_connect;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 4 0 1 1;
#X restore 292 224 pd \$0-collect-midi-amps;
#N canvas 632 137 527 458 \$0-scale-offset 0;
#X obj 36 61 change;
#X obj 36 273 + 1;
#X obj 36 297 swap 1;
#X obj 36 319 /;
#X obj 36 341 t f f;
#X obj 54 222 loadbang;
#X msg 54 244 0;
#X obj 36 385 outlet;
#X obj 68 364 outlet;
#X obj 36 86 swap;
#X obj 36 108 pack;
#X obj 36 130 route 1 0;
#X obj 36 197 f;
#X text 65 184 when the patching update is deactivated \, store value
and output it when it is reactivated;
#X obj 221 69 r patchUpdate;
#X obj 109 130 r reactivate;
#X obj 36 39 inlet;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 8 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 11 1 12 1;
#X connect 12 0 1 0;
#X connect 14 0 9 1;
#X connect 15 0 12 0;
#X connect 16 0 0 0;
#X restore 65 204 pd \$0-scale-offset;
#N canvas 309 216 452 291 \$0-initialize_instances 0;
#X obj 17 54 loadbang;
#X msg 17 77 1;
#N canvas 78 317 450 300 \$0-instances 0;
#X obj 30 30 var_shapes_instance 1030 0;
#X restore 17 236 pd \$0-instances;
#X msg 177 118 clear;
#X text 43 77 create one instance of this module by default;
#X obj 40 192 outlet;
#X text 15 10 if this module connects to the midi module \, the number
of instances set by the midi module will be used \, otherwise \, we'll
use the number of instances set by this module;
#X obj 17 214 outlet;
#X obj 233 125 r \$0-1st_inlet;
#X obj 233 147 sel 0;
#N canvas 528 69 466 494 \$0-instance_creation_loop 0;
#X obj 53 190 t f f;
#X obj 53 212 * 30;
#X obj 53 234 + 30;
#X obj 120 212 \$0;
#X obj 53 256 pack f f f;
#X msg 53 279 obj 30 \$1 var_shapes_instance \$3 \$2 \, loadbang;
#X obj 39 43 r \$0-num_voices;
#X obj 28 146 loop;
#X obj 53 168 +;
#X obj 28 21 inlet;
#X obj 28 432 outlet done;
#X obj 328 190 inlet clear;
#X obj 53 301 outlet to_instance_subpatch;
#X obj 71 146 inlet offset;
#N canvas 474 190 591 257 \$0-clear_all_but_first 0;
#X obj 16 17 inlet;
#X obj 48 184 outlet;
#X msg 16 145 cut \, editmode 0;
#X text 74 75 mouse original position must be outside any object \,
hence coordinates are 20 60 and not 30 60;
#X text 132 140 unfortunatelly the Edit menu doesn't have a delete
option \, so we're simply cutting...;
#X obj 68 17 inlet clear_only;
#X obj 16 56 1;
#X msg 48 119 editmode 1 \, mouse 20 60 0 0 \, mouseup 60 930 0;
#X obj 16 79 t b b;
#X connect 0 0 6 0;
#X connect 2 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 1 0;
#X connect 8 0 2 0;
#X connect 8 1 7 0;
#X restore 156 212 pd \$0-clear_all_but_first;
#X obj 39 92 - 1;
#X text 68 90 subtract one cause we're keeping the first instance;
#X obj 127 352 f;
#X obj 127 374 s \$0-is_midi;
#X obj 145 330 r \$0-def_midi_con;
#X obj 69 364 > 1;
#X obj 28 335 t b b b;
#X obj 51 409 s \$0-is_poly;
#X obj 51 386 f;
#X obj 39 65 t f f f;
#X obj 28 123 t f b;
#X connect 0 0 1 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 4 2;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 6 0 24 0;
#X connect 7 0 21 0;
#X connect 7 1 8 0;
#X connect 8 0 0 0;
#X connect 9 0 25 0;
#X connect 11 0 14 1;
#X connect 13 0 8 1;
#X connect 14 0 12 0;
#X connect 15 0 25 0;
#X connect 17 0 18 0;
#X connect 19 0 17 1;
#X connect 20 0 23 1;
#X connect 21 0 10 0;
#X connect 21 1 23 0;
#X connect 21 2 17 0;
#X connect 23 0 22 0;
#X connect 24 0 15 0;
#X connect 24 1 20 0;
#X connect 24 2 14 0;
#X connect 25 0 7 0;
#X connect 25 1 3 0;
#X restore 40 169 pd \$0-instance_creation_loop;
#X obj 17 128 t b b;
#X msg 136 145 1;
#X obj 17 101 t b f b;
#X obj 233 192 s pd-\$0-instances;
#X connect 0 0 1 0;
#X connect 1 0 13 0;
#X connect 3 0 14 0;
#X connect 8 0 9 0;
#X connect 9 0 10 2;
#X connect 10 0 5 0;
#X connect 10 1 14 0;
#X connect 11 0 7 0;
#X connect 11 1 12 0;
#X connect 12 0 10 1;
#X connect 13 0 11 0;
#X connect 13 1 10 0;
#X connect 13 2 3 0;
#X restore 19 71 pd \$0-initialize_instances;
#N canvas 370 59 815 624 \$0-names_states_and_tab_init 0;
#X obj 27 293 s \$0-1st_input;
#X obj 45 273 s \$0-2nd_input;
#X obj 64 253 s \$0-3rd_input;
#X obj 82 233 s \$0-4th_input;
#X obj 101 213 s \$0-5th_input;
#X obj 119 193 s \$0-6th_input;
#X obj 27 346 r inlet_states;
#X obj 27 368 unpack;
#X obj 27 412 pack;
#X text 148 126 this sets the correct names to each [r~ ];
#X text 26 315 this sets the connection state of the modules inlets
(the matrix's outlets);
#X obj 307 448 unpack;
#X obj 307 492 pack;
#X obj 307 536 s \$0-1st_outlet;
#X text 306 395 this sets the connection state of the modules outlets
(the matrix's inlets);
#X obj 307 426 r outlet_states;
#X obj 27 126 set_inputs \$2 \$3;
#X obj 27 390 - \$3;
#X obj 307 470 - \$5;
#X obj 307 514 route 1;
#X obj 27 19 inlet;
#X obj 138 173 s \$0-7th_input;
#X obj 27 434 route 1 2 3 4 5 6 7;
#X obj 27 149 route 0 1 2 3 4 5 6;
#X obj 509 146 array size \$0-frequencies;
#X obj 532 124 array size \$0-amplitudes;
#X msg 509 58 1;
#X obj 509 80 t f f f;
#X obj 555 102 array size \$0-midi_amps;
#N canvas 387 154 305 249 \$0-inlet1 0;
#X obj 49 50 inlet;
#X obj 86 75 r reactivate;
#X obj 123 100 r patchUpdate;
#X obj 49 204 s \$0-1st_inlet;
#X obj 49 122 inlet_state;
#X obj 138 123 r \$0-reinit;
#X obj 73 159 r \$0-init;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 4 1;
#X connect 6 0 3 0;
#X restore 27 578 pd \$0-inlet1;
#N canvas 0 51 297 238 \$0-inlet2 0;
#X obj 31 29 inlet;
#X obj 68 54 r reactivate;
#X obj 105 79 r patchUpdate;
#X obj 31 183 s \$0-2nd_inlet;
#X obj 31 101 inlet_state;
#X obj 119 102 r \$0-reinit;
#X obj 52 144 r \$0-init;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 4 1;
#X connect 6 0 3 0;
#X restore 45 558 pd \$0-inlet2;
#N canvas 0 51 306 234 \$0-inlet3 0;
#X obj 54 27 inlet;
#X obj 91 52 r reactivate;
#X obj 128 77 r patchUpdate;
#X obj 54 181 s \$0-3rd_inlet;
#X obj 54 99 inlet_state;
#X obj 141 99 r \$0-reinit;
#X obj 76 138 r \$0-init;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 4 1;
#X connect 6 0 3 0;
#X restore 64 538 pd \$0-inlet3;
#N canvas 0 51 299 229 \$0-inlet4 0;
#X obj 32 31 inlet;
#X obj 69 56 r reactivate;
#X obj 106 81 r patchUpdate;
#X obj 32 185 s \$0-4th_inlet;
#X obj 32 103 inlet_state;
#X obj 48 155 r \$0-init;
#X obj 120 104 r \$0-reinit;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 4 1;
#X restore 82 518 pd \$0-inlet4;
#N canvas 0 51 299 225 \$0-inlet5 0;
#X obj 30 22 inlet;
#X obj 67 47 r reactivate;
#X obj 104 72 r patchUpdate;
#X obj 30 176 s \$0-5th_inlet;
#X obj 30 94 inlet_state;
#X obj 47 140 r \$0-init;
#X obj 118 95 r \$0-reinit;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 4 1;
#X restore 101 498 pd \$0-inlet5;
#N canvas 0 51 335 229 \$0-inlet6 0;
#X obj 30 21 inlet;
#X obj 67 46 r reactivate;
#X obj 104 71 r patchUpdate;
#X obj 30 175 s \$0-6th_inlet;
#X obj 30 93 inlet_state;
#X obj 49 141 r \$0-init;
#X obj 116 93 r \$0-reinit;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 4 2;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 4 1;
#X restore 119 478 pd \$0-inlet6;
#N canvas 421 402 310 232 \$0-inlet7 0;
#X obj 19 31 inlet;
#X obj 19 103 inlet_state;
#X obj 56 56 r reactivate;
#X obj 93 81 r patchUpdate;
#X obj 19 185 s \$0-7th_inlet;
#X obj 37 148 r \$0-init;
#X obj 106 103 r \$0-reinit;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 1 2;
#X connect 5 0 4 0;
#X connect 6 0 1 1;
#X restore 138 458 pd \$0-inlet7;
#X obj 27 41 t b b b;
#X msg 50 64 0;
#X obj 50 86 s \$0-init;
#X text 120 86 goes into [pd \$0-inlet] subpatches below;
#X obj 331 224 t b b;
#X obj 363 246 s \$0-reinit;
#X text 448 248 goes into [pd \$0-inlet] subpatches below;
#X obj 331 202 inlet from_loop;
#X connect 6 0 7 0;
#X connect 7 0 17 0;
#X connect 7 1 8 1;
#X connect 8 0 22 0;
#X connect 11 0 18 0;
#X connect 11 1 12 1;
#X connect 12 0 19 0;
#X connect 15 0 11 0;
#X connect 16 0 23 0;
#X connect 17 0 8 0;
#X connect 18 0 12 0;
#X connect 19 0 13 0;
#X connect 20 0 36 0;
#X connect 22 0 29 0;
#X connect 22 1 30 0;
#X connect 22 2 31 0;
#X connect 22 3 32 0;
#X connect 22 4 33 0;
#X connect 22 5 34 0;
#X connect 22 6 35 0;
#X connect 23 0 0 0;
#X connect 23 1 1 0;
#X connect 23 2 2 0;
#X connect 23 3 3 0;
#X connect 23 4 4 0;
#X connect 23 5 5 0;
#X connect 23 6 21 0;
#X connect 26 0 27 0;
#X connect 27 0 24 0;
#X connect 27 1 25 0;
#X connect 27 2 28 0;
#X connect 36 0 16 0;
#X connect 36 1 37 0;
#X connect 36 2 26 0;
#X connect 37 0 38 0;
#X connect 40 0 16 0;
#X connect 40 1 41 0;
#X connect 43 0 40 0;
#X restore 19 93 pd \$0-names_states_and_tab_init;
#N canvas 211 51 419 689 \$0-assemble_and_scale_values 0;
#X obj 22 140 +;
#X obj 39 119 * 128;
#X obj 57 90 +;
#X obj 74 69 * 128;
#X obj 92 140 +;
#X obj 109 119 * 128;
#X obj 127 90 +;
#X obj 144 69 * 128;
#X obj 162 140 +;
#X obj 179 119 * 128;
#X obj 197 90 +;
#X obj 214 69 * 128;
#X obj 232 158 +;
#X obj 249 137 * 128;
#X obj 22 581 /;
#X obj 92 467 / 8191;
#X obj 92 489 * 2;
#X obj 127 413 / 8191;
#X obj 162 367 / 8191;
#X obj 197 273 / 8191;
#X obj 197 295 pow 4;
#X obj 197 317 * 1000;
#X obj 232 181 / 8191;
#X obj 232 203 pow 4;
#X obj 232 225 * 1000;
#X obj 57 542 debounce_float 10;
#X obj 57 564 + 1;
#X obj 92 511 s \$0-2nd_knob;
#X obj 22 647 s \$0-1st_knob;
#X obj 127 435 s \$0-3rd_knob;
#X obj 162 389 s \$0-4th_knob;
#X obj 197 339 s \$0-5th_knob;
#X obj 232 247 s \$0-6th_knob;
#X obj 22 36 unpack f f f f f f f f f f f f f f f f;
#X obj 267 91 +;
#X obj 285 69 * 128;
#X obj 267 113 s \$0-ramp_time;
#X obj 22 13 r module\$1;
#X obj 22 516 t f f;
#X obj 22 603 t f f;
#N canvas 279 74 465 502 \$0-num_of_voices 0;
#X obj 101 230 / 8191;
#X obj 101 294 i;
#X obj 101 315 change;
#X obj 101 450 array size \$0-frequencies;
#X obj 121 429 array size \$0-amplitudes;
#X obj 161 387 s \$0-num_voices;
#X obj 101 251 * 29;
#X obj 101 272 + 1;
#X obj 141 408 array size \$0-midi_amps;
#X obj 101 366 t f f f f;
#X obj 197 145 r \$0-1st_inlet;
#X obj 22 54 r \$0-midi_connect;
#X obj 172 190 >>;
#X obj 101 185 inlet;
#X obj 101 207 spigot;
#X text 20 8 if a signal connects to the frequency inlet \, but that's
not the midi module \, then and only then use the first knob to set
the number of voices;
#X obj 40 145 r num_of_midi_voices;
#X obj 22 169 f;
#X obj 172 167 swap;
#X obj 22 76 t f f f;
#X obj 68 97 s \$0-def_midi_con;
#X obj 22 121 sel 1;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 9 0 3 0;
#X connect 9 1 4 0;
#X connect 9 2 8 0;
#X connect 9 3 5 0;
#X connect 10 0 18 1;
#X connect 11 0 19 0;
#X connect 12 0 14 1;
#X connect 13 0 14 0;
#X connect 14 0 0 0;
#X connect 16 0 17 1;
#X connect 17 0 9 0;
#X connect 18 0 12 0;
#X connect 18 1 12 1;
#X connect 19 0 21 0;
#X connect 19 1 18 0;
#X connect 19 2 20 0;
#X connect 21 0 17 0;
#X restore 214 533 pd \$0-num_of_voices;
#N canvas 84 65 537 526 \$0-other_values 0;
#X obj 98 24 r to_mtx_mul;
#X obj 98 46 list split 1;
#X obj 138 104 unpack f f f;
#X obj 178 149 == \$5;
#X obj 138 225 spigot;
#X msg 138 247 \$1-incoming_freq;
#X obj 138 269 symbol;
#X obj 44 286 s;
#X obj 138 68 t l l;
#X obj 328 85 unpack f f f;
#X obj 368 131 == \$5;
#X obj 328 272 symbol;
#X obj 276 289 s;
#X msg 328 250 \$1-incoming_amp_freq;
#X obj 41 442 \$3;
#X obj 41 420 r \$1-get_inlet;
#X obj 44 153 inlet;
#X obj 44 175 t f f;
#N canvas 553 147 595 399 check-inlet-num 0;
#X obj 59 50 loadbang;
#X obj 59 94 v num_of_modules;
#X obj 41 117 f;
#X obj 66 162 tabread all_inlets_tab;
#X obj 66 295 f;
#X obj 41 26 t b f;
#X obj 41 3 inlet;
#X obj 66 250 sel 1;
#X obj 66 272 t b b;
#X obj 66 317 outlet;
#X text 94 225 find which module this inlet belongs to;
#X text 93 288 and use the number of that module's first inlet \, because
[receive] is not flexible enough in naming it;
#X obj 66 206 f;
#X obj 66 184 t b f f;
#X obj 66 228 >=;
#X obj 41 139 loop;
#X obj 59 72 del 100;
#X connect 0 0 16 0;
#X connect 1 0 2 1;
#X connect 2 0 15 0;
#X connect 3 0 13 0;
#X connect 4 0 9 0;
#X connect 5 0 2 0;
#X connect 5 1 12 1;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 4 0;
#X connect 8 1 15 3;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 13 1 14 1;
#X connect 13 2 4 1;
#X connect 14 0 7 0;
#X connect 15 1 3 0;
#X connect 16 0 1 0;
#X restore 328 225 pd check-inlet-num;
#X obj 41 464 s give_inlet;
#X text 40 374 store the first inlet number to a global table to use
it in the [pd check-inlet-num] subpatch (explanation in the subpatch)
;
#X obj 138 126 - 1;
#X obj 368 107 - 1;
#X obj 178 172 &&;
#X obj 178 126 - 1;
#X obj 368 153 &&;
#X obj 328 107 - 1;
#X obj 328 201 spigot;
#X text 39 322 send this oscillator's frequency to any oscillator module
it gives input to. this is used for the additive synthesis feature
;
#X obj 276 192 spigot;
#X obj 368 175 t f f;
#X obj 178 194 t f f;
#X obj 44 211 spigot;
#X connect 0 0 1 0;
#X connect 1 1 8 0;
#X connect 2 0 21 0;
#X connect 2 1 24 0;
#X connect 2 2 23 1;
#X connect 3 0 23 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 1;
#X connect 8 0 2 0;
#X connect 8 1 9 0;
#X connect 9 0 26 0;
#X connect 9 1 22 0;
#X connect 9 2 25 1;
#X connect 10 0 25 0;
#X connect 11 0 12 1;
#X connect 13 0 11 0;
#X connect 14 0 19 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 17 0 32 0;
#X connect 17 1 29 0;
#X connect 18 0 13 0;
#X connect 21 0 4 0;
#X connect 22 0 10 0;
#X connect 23 0 31 0;
#X connect 24 0 3 0;
#X connect 25 0 30 0;
#X connect 26 0 27 0;
#X connect 27 0 18 0;
#X connect 29 0 12 0;
#X connect 30 0 29 1;
#X connect 30 1 27 1;
#X connect 31 0 32 1;
#X connect 31 1 4 1;
#X connect 32 0 7 0;
#X restore 54 625 pd \$0-other_values;
#X connect 0 0 38 0;
#X connect 1 0 0 1;
#X connect 2 0 25 0;
#X connect 3 0 2 1;
#X connect 4 0 15 0;
#X connect 5 0 4 1;
#X connect 6 0 17 0;
#X connect 7 0 6 1;
#X connect 8 0 18 0;
#X connect 9 0 8 1;
#X connect 10 0 19 0;
#X connect 11 0 10 1;
#X connect 12 0 22 0;
#X connect 13 0 12 1;
#X connect 14 0 39 0;
#X connect 15 0 16 0;
#X connect 16 0 27 0;
#X connect 17 0 29 0;
#X connect 18 0 30 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 31 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 32 0;
#X connect 25 0 26 0;
#X connect 26 0 14 1;
#X connect 33 0 0 0;
#X connect 33 1 1 0;
#X connect 33 2 2 0;
#X connect 33 3 3 0;
#X connect 33 4 4 0;
#X connect 33 5 5 0;
#X connect 33 6 6 0;
#X connect 33 7 7 0;
#X connect 33 8 8 0;
#X connect 33 9 9 0;
#X connect 33 10 10 0;
#X connect 33 11 11 0;
#X connect 33 12 12 0;
#X connect 33 13 13 0;
#X connect 33 14 34 0;
#X connect 33 15 35 0;
#X connect 34 0 36 0;
#X connect 35 0 34 1;
#X connect 37 0 33 0;
#X connect 38 0 14 0;
#X connect 38 1 40 0;
#X connect 39 0 28 0;
#X connect 39 1 41 0;
#X restore 19 49 pd \$0-assemble_and_scale_values;
#X obj 292 180 switch_state;
#N canvas 670 80 313 265 \$0-define_midi_connection 0;
#X obj 15 16 r to_mtx_mul;
#X obj 15 38 list split 1;
#X obj 55 60 unpack f f f;
#X obj 55 132 == \$3;
#X obj 95 109 ==;
#X obj 55 154 &&;
#X obj 113 86 r midi_outlet;
#X obj 55 109 - 1;
#X obj 55 199 s \$0-midi_connect;
#X obj 55 177 &&;
#X connect 0 0 1 0;
#X connect 1 1 2 0;
#X connect 2 0 7 0;
#X connect 2 1 4 0;
#X connect 2 2 9 1;
#X connect 3 0 5 0;
#X connect 4 0 5 1;
#X connect 5 0 9 0;
#X connect 6 0 4 1;
#X connect 7 0 3 0;
#X connect 9 0 8 0;
#X restore 292 314 pd \$0-define_midi_connection;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 2 0 3 0;
#X connect 3 0 0 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 1 1;
#X connect 10 0 9 0;
#X connect 11 0 27 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 0 0;
#X connect 17 0 23 0;
#X connect 18 0 14 1;
#X connect 23 0 2 0;
#X connect 23 1 4 0;
#X connect 24 0 25 0;
#X connect 24 1 25 1;
#X connect 27 0 8 0;
