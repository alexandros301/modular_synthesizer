#N canvas 582 184 418 275 10;
#X declare -path ./abstractions;
#N canvas 601 112 559 505 serial-communication 0;
#X msg 79 90 close;
#X obj 14 185 select 192;
#X obj 71 319 spigot;
#X msg 104 296 0;
#X msg 14 244 1;
#X obj 37 375 spigot;
#X msg 53 244 0;
#X obj 14 219 t b b b;
#X obj 14 162 comport 6 115200;
#X obj 14 22 inlet;
#X text 103 239 after data transfer package received \, close spigot
till package initialiser received;
#X obj 37 397 outlet;
#X obj 79 68 inlet;
#X text 89 181 This is 0xc0 in the Arduino code which denotes the beginning
of the data stream;
#X obj 171 69 r pd;
#X obj 171 91 route dsp;
#X text 244 92 control the DSP LED;
#X obj 14 266 t f f;
#X msg 171 113 print \$1;
#X msg 14 46 devices;
#X obj 26 68 inlet;
#X msg 26 90 open \$1;
#X obj 174 339 spigot;
#X obj 231 382 t l b;
#X obj 231 404 print;
#X obj 207 318 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 216 339 debug input;
#X obj 104 271 r close-comport;
#X obj 37 347 repack 31;
#X obj 174 361 route bang;
#X connect 0 0 8 0;
#X connect 1 0 7 0;
#X connect 1 1 2 0;
#X connect 2 0 28 0;
#X connect 3 0 2 1;
#X connect 4 0 17 0;
#X connect 5 0 11 0;
#X connect 6 0 5 1;
#X connect 7 0 4 0;
#X connect 7 1 28 0;
#X connect 7 2 6 0;
#X connect 8 0 1 0;
#X connect 9 0 19 0;
#X connect 12 0 0 0;
#X connect 14 0 15 0;
#X connect 15 0 18 0;
#X connect 17 0 5 1;
#X connect 17 1 2 1;
#X connect 18 0 8 0;
#X connect 19 0 8 0;
#X connect 20 0 21 0;
#X connect 21 0 8 0;
#X connect 22 0 29 0;
#X connect 23 0 24 0;
#X connect 23 1 25 0;
#X connect 25 0 22 1;
#X connect 27 0 3 0;
#X connect 28 0 5 0;
#X connect 28 0 22 0;
#X connect 29 1 23 0;
#X restore 45 187 pd serial-communication;
#X msg 45 111 bang;
#X msg 180 159 bang;
#N canvas 887 113 279 221 receivedData 0;
#X obj 15 30 inlet;
#N canvas 613 84 536 219 analog 0;
#X obj 29 21 inlet;
#X text 138 14 each subpatch contains the values of the potentiometers
of each module. the amount of values passed to that subpatch is the
number of potentiometers of the module * 2;
#N canvas 223 83 413 535 first-module 0;
#X obj 25 10 inlet;
#X obj 25 104 t f b;
#X obj 25 448 +;
#X obj 86 269 +;
#X obj 117 179 +;
#X obj 148 429 +;
#X obj 179 339 +;
#X obj 210 248 +;
#X obj 210 292 s osc1-fallPow;
#X obj 179 382 s osc1-risePow;
#X obj 148 472 s osc1-brk;
#X obj 117 222 s osc1-switch;
#X obj 25 492 s osc1-freq;
#X obj 86 313 s osc1-pmIndex;
#X obj 55 402 s osc1-fmIndex;
#X obj 55 358 +;
#X obj 43 425 * 128;
#X obj 73 336 * 128;
#X obj 104 246 * 128;
#X obj 135 156 * 128;
#X obj 166 406 * 128;
#X obj 197 316 * 128;
#X obj 228 225 * 128;
#X obj 55 380 / 8;
#X obj 86 291 / 4096;
#X obj 117 200 / 8191;
#X obj 148 450 / 8191;
#X obj 210 270 / 8191;
#X obj 62 57 outlet;
#X obj 52 127 s close-comport;
#X obj 179 360 / 8191;
#X obj 25 82 unpack f f f f f f f f f f f f f f;
#X obj 25 32 list split 14;
#X obj 25 470 * 0.15;
#X connect 0 0 32 0;
#X connect 1 0 2 0;
#X connect 1 1 29 0;
#X connect 2 0 33 0;
#X connect 3 0 24 0;
#X connect 4 0 25 0;
#X connect 5 0 26 0;
#X connect 6 0 30 0;
#X connect 7 0 27 0;
#X connect 15 0 23 0;
#X connect 16 0 2 1;
#X connect 17 0 15 1;
#X connect 18 0 3 1;
#X connect 19 0 4 1;
#X connect 20 0 5 1;
#X connect 21 0 6 1;
#X connect 22 0 7 1;
#X connect 23 0 14 0;
#X connect 24 0 13 0;
#X connect 25 0 11 0;
#X connect 26 0 10 0;
#X connect 27 0 8 0;
#X connect 30 0 9 0;
#X connect 31 0 1 0;
#X connect 31 1 16 0;
#X connect 31 2 15 0;
#X connect 31 3 17 0;
#X connect 31 4 3 0;
#X connect 31 5 18 0;
#X connect 31 6 4 0;
#X connect 31 7 19 0;
#X connect 31 8 5 0;
#X connect 31 9 20 0;
#X connect 31 10 6 0;
#X connect 31 11 21 0;
#X connect 31 12 7 0;
#X connect 31 13 22 0;
#X connect 32 0 31 0;
#X connect 32 1 28 0;
#X connect 33 0 12 0;
#X restore 29 44 pd first-module;
#N canvas 221 293 309 278 third-module 0;
#X obj 37 17 inlet;
#X obj 37 89 unpack;
#X obj 37 141 +;
#X obj 70 124 * 128;
#X obj 37 163 / 8191;
#X obj 37 231 s ramp;
#X obj 37 39 list split 2;
#X obj 71 62 outlet;
#X obj 37 185 * 1000;
#X obj 37 207 + 15;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 8 0;
#X connect 6 0 1 0;
#X connect 6 1 7 0;
#X connect 8 0 9 0;
#X connect 9 0 5 0;
#X restore 29 91 pd third-module;
#N canvas 725 103 368 551 second-module 0;
#X obj 25 7 inlet;
#X obj 25 408 +;
#X obj 98 219 +;
#X obj 135 129 +;
#X obj 61 313 +;
#X obj 25 454 s osc2-freq;
#X obj 61 356 s osc2-fmIndex;
#X obj 98 262 s osc2-pmIndex;
#X obj 43 385 * 128;
#X obj 79 291 * 128;
#X obj 116 196 * 128;
#X obj 153 106 * 128;
#X obj 61 334 / 8;
#X obj 98 240 / 4096;
#X obj 135 172 s osc2-pow;
#X obj 135 150 * 0.02;
#X obj 59 52 outlet;
#X obj 25 82 unpack f f f f f f f f;
#X obj 25 29 list split 8;
#X obj 25 430 * 0.15;
#X connect 0 0 18 0;
#X connect 1 0 19 0;
#X connect 2 0 13 0;
#X connect 3 0 15 0;
#X connect 4 0 12 0;
#X connect 8 0 1 1;
#X connect 9 0 4 1;
#X connect 10 0 2 1;
#X connect 11 0 3 1;
#X connect 12 0 6 0;
#X connect 13 0 7 0;
#X connect 15 0 14 0;
#X connect 17 0 1 0;
#X connect 17 1 8 0;
#X connect 17 2 4 0;
#X connect 17 3 9 0;
#X connect 17 4 2 0;
#X connect 17 5 10 0;
#X connect 17 6 3 0;
#X connect 17 7 11 0;
#X connect 18 0 17 0;
#X connect 18 1 16 0;
#X connect 19 0 5 0;
#X restore 29 67 pd second-module;
#X obj 29 115 outlet;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X restore 15 53 pd analog;
#N canvas 390 115 787 447 comparison-tables 0;
#X msg 595 136 resize \$1;
#X floatatom 101 350 5 0 0 2 index - -, f 5;
#X floatatom 56 350 5 0 0 2 value - -, f 5;
#X obj 432 33 loadbang;
#X obj 607 114 v num_of_modules;
#X floatatom 534 26 5 0 0 2 num_of_modules - -, f 5;
#X msg 159 345 store;
#X msg 163 368 read;
#X obj 614 203 s switch_pins;
#X obj 595 223 s num_of_switches;
#X symbolatom 11 319 16 0 0 2 set_table - -, f 16;
#X msg 162 389 clear;
#X msg 534 97 3;
#X obj 534 119 t f f;
#X obj 11 338 t s b;
#N canvas 427 395 673 346 create-tables 0;
#X obj 268 114 until;
#X obj 268 157 f;
#X obj 298 158 + 1;
#X obj 287 201 * 20;
#X msg 283 136 0;
#X obj 287 223 + 10;
#X obj 287 245 pack;
#X obj 287 290 s pd-tables;
#X msg 287 268 obj 300 \$1 table previous_states\$2;
#X obj 26 76 sel;
#X obj 268 179 t f f f;
#X obj 26 143 until;
#X obj 26 186 f;
#X obj 56 187 + 1;
#X msg 41 163 0;
#X obj 26 208 pack;
#X msg 26 230 \; previous_states\$1 resize \$2;
#X obj 41 55 - 1;
#X obj 26 121 t f b;
#X obj 26 99 v outlets;
#X obj 122 191 v inlets;
#X msg 268 43 bang;
#X obj 95 59 t b b;
#X obj 95 37 inlet;
#X text 94 19 set size of previous states tables;
#X text 299 43 create previous state tables (if they don't already
exist);
#X obj 268 66 v outlets;
#X obj 268 89 t f b f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 10 0;
#X connect 2 0 1 1;
#X connect 3 0 5 0;
#X connect 4 0 1 1;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 8 0 7 0;
#X connect 9 0 19 0;
#X connect 10 0 9 0;
#X connect 10 1 3 0;
#X connect 10 2 6 1;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 0 15 0;
#X connect 13 0 12 1;
#X connect 14 0 12 1;
#X connect 15 0 16 0;
#X connect 17 0 9 1;
#X connect 18 0 11 0;
#X connect 18 1 14 0;
#X connect 19 0 18 0;
#X connect 20 0 15 1;
#X connect 21 0 26 0;
#X connect 22 0 19 0;
#X connect 22 1 20 0;
#X connect 23 0 22 0;
#X connect 26 0 27 0;
#X connect 27 0 0 0;
#X connect 27 1 4 0;
#X connect 27 2 17 0;
#X restore 451 367 pd create-tables;
#X obj 534 45 t b f;
#X msg 561 66 set \$1;
#X obj 595 158 t a a a;
#X obj 634 182 s input_pins;
#X msg 530 310 4;
#X obj 530 332 v inlets;
#X obj 470 332 v outlets;
#X text 467 349 number of outlets and inlets of [mtx_*~];
#X obj 432 80 t b b b;
#X obj 451 270 t b b b;
#X text 10 26 input_pins table should store the number of input pins
used on each module \, starting from 0;
#X text 9 65 switch_pins table should store the pin the first switch
is attached to on each module \, starting from 0;
#X text 9 101 num_of_switches table should store the number of switches
on each module;
#X msg 152 324 manual;
#X msg 146 302 automatic;
#X text 206 302 index;
#X text 194 325 index;
#X text 196 345 values;
#X text 193 368 values;
#X text 198 389 [textfile];
#N canvas 585 48 651 615 set-values-to-tables 0;
#X obj 21 314 tabwrite;
#X obj 121 206 t b b;
#X obj 106 297 f;
#X obj 136 298 + 1;
#X msg 121 275 0;
#X obj 39 234 t f b;
#X obj 106 251 spigot;
#X msg 139 229 1;
#X msg 167 205 0;
#X obj 21 4 inlet which_table;
#X obj 39 110 inlet value;
#X obj 66 135 inlet index;
#X obj 21 53 list prepend set;
#X obj 21 75 list trim;
#X obj 213 379 textfile;
#X msg 305 206 clear;
#X msg 179 299 write ./data/tables.txt;
#X msg 189 277 add \$1;
#X msg 230 351 rewind;
#X msg 247 329 read ./data/tables.txt;
#X obj 21 26 t s b s;
#X obj 240 572 s;
#X msg 264 274 1;
#X obj 225 464 spigot;
#X msg 271 422 0;
#X msg 395 330 symbol write;
#X msg 240 532 \$2 ./data/\$1.txt;
#X obj 240 509 pack s s;
#X obj 213 250 t b b b b;
#X obj 213 206 t b b;
#X obj 259 206 t b b;
#X msg 396 306 symbol read;
#X text 272 372 store table names to a text file to be able to call
them automatically;
#X obj 213 401 t b a;
#X obj 267 555 symbol;
#X obj 240 486 t a a;
#X obj 121 161 inlet features;
#X obj 121 184 route automatic manual store read clear;
#X connect 1 0 4 0;
#X connect 1 1 7 0;
#X connect 2 0 3 0;
#X connect 2 0 0 1;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 0 0;
#X connect 5 1 6 0;
#X connect 6 0 2 0;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 9 0 20 0;
#X connect 10 0 5 0;
#X connect 11 0 0 1;
#X connect 12 0 13 0;
#X connect 13 0 0 0;
#X connect 14 0 33 0;
#X connect 14 1 24 0;
#X connect 15 0 14 0;
#X connect 16 0 14 0;
#X connect 17 0 14 0;
#X connect 18 0 14 0;
#X connect 19 0 14 0;
#X connect 20 0 12 0;
#X connect 20 1 16 0;
#X connect 20 2 17 0;
#X connect 22 0 23 1;
#X connect 23 0 14 0;
#X connect 24 0 23 1;
#X connect 25 0 27 1;
#X connect 26 0 21 0;
#X connect 27 0 26 0;
#X connect 28 0 14 0;
#X connect 28 1 18 0;
#X connect 28 2 19 0;
#X connect 28 3 22 0;
#X connect 29 0 28 0;
#X connect 29 1 25 0;
#X connect 30 0 28 0;
#X connect 30 1 31 0;
#X connect 31 0 27 1;
#X connect 33 0 23 0;
#X connect 33 1 35 0;
#X connect 34 0 21 1;
#X connect 35 0 27 0;
#X connect 35 1 34 0;
#X connect 36 0 37 0;
#X connect 37 0 1 0;
#X connect 37 1 8 0;
#X connect 37 2 29 0;
#X connect 37 3 30 0;
#X connect 37 4 15 0;
#X restore 11 369 pd set-values-to-tables;
#X text 9 137 previous_states\$1 tables store the states of connections.
\$1 is the outlet number of [mtx_*~] and the table's size is the number
of inlets of [mtx_*~] so you get a unique value for all possible connections.
these tables are used in the set-connection subpatch \, where their
values are compared to incoming values. if they are the same \, set-connection
won't output anything \, if they are different \, set-connection will
output a matrix message of the form "element \$1 \$2 \$3" and it will
store the new connection to the corresponding previous_states\$1 table
\, at the corresponding index;
#X msg 470 310 12;
#X msg 443 55 bang;
#N canvas 484 85 479 488 tables 0;
#X obj 18 32 table switch_pins;
#X obj 18 52 table num_of_switches;
#X obj 18 12 table input_pins;
#X obj 300 10 table previous_states0;
#X obj 300 30 table previous_states1;
#X obj 300 50 table previous_states2;
#X obj 300 70 table previous_states3;
#X obj 300 90 table previous_states4;
#X obj 300 110 table previous_states5;
#X obj 300 130 table previous_states6;
#X obj 300 150 table previous_states7;
#X obj 300 170 table previous_states8;
#X obj 300 190 table previous_states9;
#X obj 300 210 table previous_states10;
#X obj 300 230 table previous_states11;
#X restore 10 273 pd tables;
#N canvas 579 243 311 279 zero-previous_states 0;
#X obj 75 15 inlet;
#X obj 75 37 v outlets;
#X obj 75 81 until;
#X obj 75 124 f;
#X obj 105 125 + 1;
#X msg 90 103 0;
#X obj 75 146 t b f;
#X msg 102 193 symbol previous_states\$1;
#X msg 75 168 const 0;
#X obj 75 210 s;
#X obj 75 59 t f b b;
#X obj 114 81 s matrix;
#X connect 0 0 1 0;
#X connect 1 0 10 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 8 0;
#X connect 6 1 7 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 10 0 2 0;
#X connect 10 1 5 0;
#X connect 10 2 11 0;
#X restore 451 413 pd zero-previous_states;
#X msg 451 390 bang;
#X connect 0 0 18 0;
#X connect 1 0 36 2;
#X connect 2 0 36 1;
#X connect 3 0 24 0;
#X connect 5 0 16 0;
#X connect 6 0 36 3;
#X connect 7 0 36 3;
#X connect 10 0 14 0;
#X connect 11 0 36 3;
#X connect 12 0 13 0;
#X connect 13 0 4 0;
#X connect 13 1 0 0;
#X connect 14 0 36 0;
#X connect 14 1 30 0;
#X connect 16 0 12 0;
#X connect 16 1 17 0;
#X connect 17 0 12 0;
#X connect 18 0 9 0;
#X connect 18 1 8 0;
#X connect 18 2 19 0;
#X connect 20 0 21 0;
#X connect 24 0 7 0;
#X connect 24 1 25 0;
#X connect 24 2 12 0;
#X connect 25 0 15 0;
#X connect 25 1 38 0;
#X connect 25 2 20 0;
#X connect 29 0 36 3;
#X connect 30 0 36 3;
#X connect 38 0 22 0;
#X connect 39 0 24 0;
#X connect 42 0 41 0;
#X restore 14 120 pd comparison-tables;
#X obj 15 97 outlet;
#N canvas 698 75 384 269 digital 0;
#X obj 49 57 inlet;
#N canvas 374 22 726 731 set-connection 0;
#X obj 17 13 inlet;
#X obj 17 183 until;
#X obj 17 229 f;
#X obj 17 313 &;
#X obj 17 335 == 0;
#X obj 17 495 t f f;
#X obj 50 518 !=;
#X obj 17 546 spigot;
#X obj 17 568 t f f;
#X obj 17 649 pack f f f;
#X msg 17 672 element \$3 \$2 \$1;
#X obj 17 697 outlet;
#X msg 85 351 set previous_states\$1;
#X obj 65 491 tabread;
#X obj 17 88 +;
#X obj 32 65 * 128;
#X msg 32 206 1;
#X obj 49 229 * 2;
#X obj 112 585 tabwrite;
#X obj 85 373 t a a;
#X obj 44 396 f;
#X obj 74 396 + 1;
#X msg 59 373 0;
#X obj 350 459 until;
#X obj 350 503 f;
#X obj 380 503 + 1;
#X msg 365 481 0;
#X obj 350 526 tabread input_pins;
#X obj 350 570 +;
#X obj 380 570 f;
#X msg 365 548 0;
#X obj 44 421 +;
#X text 167 584 store altered state;
#X text 22 279 bitwise AND with 1 \, 2 \, 4 \, 8 \, 16 \, 32... and
check for inequality with zero;
#X obj 350 437 t f b b;
#X obj 311 404 moses 1;
#X obj 45 623 + 1;
#X text 99 622 + 1 cause [mtx_*~] starts counting from 1;
#X obj 17 38 unpack f f f f;
#X obj 85 328 t f f;
#X text 57 6 incoming bytes refer to input byte \, output pin # and
input chip #;
#X obj 74 623 + 1;
#X obj 44 443 t f f f;
#X obj 98 142 tabread input_pins;
#X obj 98 61 t f f;
#X obj 17 159 f;
#X obj 17 136 t b b f b;
#X obj 17 254 t f b;
#X text 309 350 accumulate used input pins of previous chips to set
correct inlet number offset;
#X text 113 490 compare stored state of connection;
#X text 361 402 a 0 won't make [until] run a loop so send it to [+
] explicitly;
#N canvas 295 141 245 249 banana-changed1 0;
#X obj 96 88 f;
#X obj 45 62 t f f f b;
#X obj 62 105 !=;
#X obj 45 157 spigot;
#X obj 62 127 t f f;
#X obj 45 39 inlet;
#X obj 45 179 outlet;
#X obj 89 157 outlet;
#X connect 0 0 2 1;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 1 2 0 1;
#X connect 1 3 0 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 4 1 7 0;
#X connect 5 0 1 0;
#X restore 311 382 pd banana-changed1;
#N canvas 445 214 505 337 banana-changed2 0;
#X obj 34 66 inlet;
#X obj 34 88 t b f;
#X obj 90 65 > 0;
#X obj 34 128 spigot;
#X obj 149 105 t f f f b;
#X obj 200 130 f;
#X obj 166 147 !=;
#X obj 149 269 spigot;
#X obj 149 291 f;
#X obj 149 313 outlet;
#X obj 166 169 t f f;
#X obj 34 216 spigot;
#X obj 68 196 == 0;
#X text 116 60 if the other value has changed open the [spigot] below
;
#X text 76 212 if this value has changed you don't need to bang it
\, if it hasn't \, you should bang it if the other has changed;
#X obj 90 43 inlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 4 0;
#X connect 2 0 3 1;
#X connect 3 0 11 0;
#X connect 4 0 7 0;
#X connect 4 1 6 0;
#X connect 4 2 5 1;
#X connect 4 3 5 0;
#X connect 5 0 6 1;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 10 0 12 0;
#X connect 10 1 7 1;
#X connect 11 0 8 0;
#X connect 12 0 11 1;
#X connect 15 0 2 0;
#X restore 17 112 pd banana-changed2;
#X text 96 159 run the loop for as many times as the number of pins
used of current input chip;
#X connect 0 0 38 0;
#X connect 1 0 2 0;
#X connect 2 0 17 0;
#X connect 2 0 47 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 5 1 6 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 1 18 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 12 0 19 0;
#X connect 13 0 6 1;
#X connect 14 0 52 0;
#X connect 15 0 14 1;
#X connect 16 0 2 1;
#X connect 17 0 2 1;
#X connect 19 0 13 0;
#X connect 19 1 18 0;
#X connect 20 0 21 0;
#X connect 20 0 31 0;
#X connect 21 0 20 1;
#X connect 22 0 20 1;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 24 0 27 0;
#X connect 25 0 24 1;
#X connect 26 0 24 1;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 28 0 31 1;
#X connect 29 0 28 1;
#X connect 30 0 28 1;
#X connect 31 0 42 0;
#X connect 34 0 23 0;
#X connect 34 1 26 0;
#X connect 34 2 30 0;
#X connect 35 0 31 1;
#X connect 35 1 34 0;
#X connect 36 0 9 1;
#X connect 38 0 14 0;
#X connect 38 1 15 0;
#X connect 38 2 39 0;
#X connect 38 3 44 0;
#X connect 39 0 12 0;
#X connect 39 1 41 0;
#X connect 41 0 9 2;
#X connect 42 0 36 0;
#X connect 42 1 13 0;
#X connect 42 2 18 1;
#X connect 43 0 45 1;
#X connect 44 0 43 0;
#X connect 44 1 51 0;
#X connect 45 0 1 0;
#X connect 46 0 45 0;
#X connect 46 1 16 0;
#X connect 46 2 3 1;
#X connect 46 3 22 0;
#X connect 47 0 3 0;
#X connect 47 1 20 0;
#X connect 51 0 35 0;
#X connect 51 1 52 1;
#X connect 52 0 46 0;
#X restore 49 154 pd set-connection;
#X obj 49 176 outlet;
#N canvas 291 197 670 499 get-switches 0;
#X obj 21 167 until;
#X obj 49 329 f;
#X obj 49 354 &;
#X obj 49 376 == 0;
#X obj 21 444 outlet;
#X obj 21 11 inlet;
#X obj 21 33 unpack f f f;
#X obj 250 148 tabread switch_pins;
#X obj 270 125 tabread num_of_switches;
#X obj 21 72 +;
#X obj 55 55 * 128;
#X text 61 9 incoming bytes are input byte and input chip #;
#X obj 21 401 pack f f f;
#X msg 21 423 \$3 \$1 \$2;
#X obj 231 74 t f f f;
#X obj 79 262 swap 2;
#X obj 79 284 pow;
#X obj 81 329 * 2;
#X obj 21 142 f;
#X obj 250 172 t f f;
#X obj 21 210 f;
#X obj 51 211 + 1;
#X obj 21 253 t f b;
#X text 76 212 start from # of pin the first switch is attached to
;
#X text 279 95 loop for as many times as the number of switches attached
to the current chip;
#X text 75 423 spit input chip # with switch index and value;
#N canvas 778 73 245 249 switch-changed1 0;
#X obj 116 88 f;
#X obj 65 62 t f f f b;
#X obj 82 105 !=;
#X obj 126 187 spigot;
#X obj 82 127 t f f;
#X obj 65 39 inlet;
#X obj 126 209 outlet;
#X obj 82 209 outlet;
#X connect 0 0 2 1;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 1 2 0 1;
#X connect 1 3 0 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 7 0;
#X connect 4 1 3 1;
#X connect 5 0 1 0;
#X restore 126 50 pd switch-changed1;
#N canvas 35 150 509 360 switch-changed2 0;
#X obj 34 66 inlet;
#X obj 34 88 t b f;
#X obj 90 68 > 0;
#X obj 34 128 spigot;
#X obj 149 105 t f f f b;
#X obj 200 130 f;
#X obj 166 147 !=;
#X obj 149 269 spigot;
#X obj 149 291 f;
#X obj 149 313 outlet;
#X obj 166 169 t f f;
#X obj 34 216 spigot;
#X obj 68 196 == 0;
#X text 115 69 if the other value has changed open the [spigot] below
;
#X text 76 212 if this value has changed you don't need to bang it
\, if it hasn't \, you should bang it if the other has changed;
#X obj 90 45 inlet changed;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 4 0;
#X connect 2 0 3 1;
#X connect 3 0 11 0;
#X connect 4 0 7 0;
#X connect 4 1 6 0;
#X connect 4 2 5 1;
#X connect 4 3 5 0;
#X connect 5 0 6 1;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 10 0 12 0;
#X connect 10 1 7 1;
#X connect 11 0 8 0;
#X connect 12 0 11 1;
#X connect 15 0 2 0;
#X restore 21 94 pd switch-changed2;
#X obj 36 189 f;
#X obj 64 307 f;
#X obj 21 119 t b b f b;
#X text 104 286 values read from tables need to be stored in a variable
cause they won't be output if they don't change and that will cause
an overflow;
#X connect 0 0 20 0;
#X connect 1 0 17 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 12 1;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 10 0;
#X connect 6 2 26 0;
#X connect 7 0 19 0;
#X connect 8 0 18 1;
#X connect 9 0 27 0;
#X connect 10 0 9 1;
#X connect 12 0 13 0;
#X connect 13 0 4 0;
#X connect 14 0 12 2;
#X connect 14 1 7 0;
#X connect 14 2 8 0;
#X connect 15 0 16 0;
#X connect 15 1 16 1;
#X connect 16 0 29 1;
#X connect 17 0 1 1;
#X connect 18 0 0 0;
#X connect 19 0 28 1;
#X connect 19 1 15 0;
#X connect 20 0 21 0;
#X connect 20 0 22 0;
#X connect 21 0 20 1;
#X connect 22 0 12 0;
#X connect 22 1 1 0;
#X connect 26 0 27 1;
#X connect 26 1 14 0;
#X connect 27 0 30 0;
#X connect 28 0 20 1;
#X connect 29 0 1 1;
#X connect 30 0 18 0;
#X connect 30 1 28 0;
#X connect 30 2 2 1;
#X connect 30 3 29 0;
#X restore 163 130 pd get-switches;
#N canvas 484 154 534 207 diffuse-switches 0;
#X obj 26 22 inlet;
#X obj 26 48 route 0 1 2;
#N canvas 571 129 506 230 module1 0;
#X obj 52 22 inlet;
#X obj 52 45 route 1;
#X obj 52 67 change;
#X obj 52 89 s scaleOffset1;
#X text 105 44 [route]'s arguments are the pins where the switches
are attached to on the corresponding module \, starting from 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 26 117 pd module1;
#N canvas 528 304 490 232 module2 0;
#X obj 37 63 route 1 2;
#X obj 37 129 change;
#X obj 62 85 change;
#X obj 37 39 inlet;
#X obj 37 151 s scaleOffset2;
#X obj 62 107 s pow_scaleOffset;
#X text 85 32 [route]'s arguments are the pins where the switches are
attached to on the corresponding module \, starting from 0;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X restore 47 96 pd module2;
#N canvas 266 207 604 229 module3 0;
#X obj 37 29 inlet;
#X obj 37 117 change;
#X obj 62 74 change;
#X obj 37 52 route 2 3;
#X obj 62 96 s patchUpdate;
#X msg 37 139 dsp \$1;
#X obj 37 161 s pd;
#X text 98 42 [route]'s arguments are the pins where the switches are
attached to on the corresponding module \, starting from 0;
#X connect 0 0 3 0;
#X connect 1 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 5 0 6 0;
#X restore 68 74 pd module3;
#X text 99 39 [route]'s arguments are the indices of the modules \,
starting from 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X restore 163 154 pd diffuse-switches;
#X obj 49 79 list split 4;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 5 0 1 0;
#X connect 5 1 3 0;
#X restore 15 75 pd digital;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 4 0 3 0;
#X restore 45 209 pd receivedData;
#X text 179 142 close serial port;
#N canvas 384 329 794 421 audio-engine 0;
#N canvas 105 158 603 232 osc1-inputs 0;
#X obj 12 61 inlet~;
#X obj 102 61 inlet~;
#X obj 197 61 inlet~;
#X obj 279 61 inlet~;
#X obj 339 61 inlet~;
#X obj 434 61 inlet~;
#X obj 279 83 s~ brk1;
#X obj 197 83 s~ switch1;
#X obj 12 83 s~ freqMod1;
#X obj 102 83 s~ phaseMod1;
#X obj 339 83 s~ risePow1;
#X obj 434 83 s~ fallPow1;
#X connect 0 0 8 0;
#X connect 1 0 9 0;
#X connect 2 0 7 0;
#X connect 3 0 6 0;
#X connect 4 0 10 0;
#X connect 5 0 11 0;
#X restore 31 314 pd osc1-inputs;
#X obj 295 246 adc~;
#N canvas 460 508 303 168 osc2-inputs 0;
#X obj 12 61 inlet~;
#X obj 102 61 inlet~;
#X obj 197 61 inlet~;
#X obj 12 83 s~ freqMod2;
#X obj 102 83 s~ phaseMod2;
#X obj 197 83 s~ pow;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X restore 225 314 pd osc2-inputs;
#X obj 31 109 t a a;
#N canvas 145 85 591 427 varShapeOsc~ 0;
#X obj 32 230 *~;
#X obj 32 273 +~;
#X obj 214 191 pack f 20;
#X obj 214 213 line~;
#X obj 295 190 * -1;
#X obj 295 212 + 1;
#X obj 295 234 pack f 20;
#X obj 295 256 line~;
#X text 82 375 turn subpatch on or off \, according to connection state
;
#X obj 32 375 switch~;
#X obj 32 193 varShapesOsc~;
#X obj 32 295 outlet~;
#N canvas 474 241 572 274 freq 0;
#X obj 32 212 +~;
#X obj 51 127 *~;
#X obj 138 88 pack f 20;
#X obj 138 110 line~;
#X obj 51 105 r~ freqMod1;
#X obj 51 189 *~;
#X obj 209 150 pack f 20;
#X obj 209 172 line~;
#X obj 32 234 outlet~;
#X obj 32 14 r osc1-freq;
#X obj 138 66 r osc1-fmIndex1;
#X obj 32 36 pack f 15;
#X obj 32 58 line~;
#X obj 290 103 r patchUpdate;
#X obj 209 103 r reactivate;
#X obj 209 125 param_on-off 1;
#X text 298 125 [param_on-off] argument is outlet number;
#X connect 0 0 8 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 1 1;
#X connect 4 0 1 0;
#X connect 5 0 0 1;
#X connect 6 0 7 0;
#X connect 7 0 5 1;
#X connect 9 0 11 0;
#X connect 10 0 2 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 13 0 15 1;
#X connect 14 0 15 0;
#X connect 15 0 6 0;
#X restore 32 27 pd freq;
#N canvas 302 182 451 299 phase 0;
#X obj 141 46 pack f 20;
#X obj 141 68 line~;
#X obj 47 85 *~;
#X obj 47 63 r~ phaseMod1;
#X obj 47 199 *~;
#X obj 101 160 pack f 20;
#X obj 101 182 line~;
#X obj 47 221 outlet~;
#X obj 141 24 r osc1-pmIndex;
#X obj 182 117 r patchUpdate;
#X obj 101 117 r reactivate;
#X text 190 139 [param_on-off] argument is outlet number;
#X obj 101 139 param_on-off 2;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 6 0 4 1;
#X connect 8 0 0 0;
#X connect 9 0 12 1;
#X connect 10 0 12 0;
#X connect 12 0 5 0;
#X restore 44 50 pd phase;
#N canvas 199 176 575 338 switch 0;
#X obj 27 85 pack f 20;
#X obj 27 107 line~;
#X obj 27 63 r osc1-switch;
#X obj 105 147 r~ switch1;
#X obj 27 292 outlet~;
#X obj 27 268 clip~ 0 1;
#X obj 105 210 *~;
#X obj 219 150 pack f 20;
#X obj 219 172 line~;
#X obj 42 169 *~ -1;
#X obj 42 191 +~ 1;
#X obj 27 216 *~;
#X obj 120 189 *~;
#X text 129 207 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 239 96 loadbang;
#X msg 239 118 0;
#X text 264 119 start off with no connection;
#X obj 300 43 r patchUpdate;
#X obj 219 43 r reactivate;
#X text 308 65 [param_on-off] argument is outlet number;
#X obj 219 65 param_on-off 3;
#X connect 0 0 1 0;
#X connect 1 0 12 0;
#X connect 1 0 11 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 12 1;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 5 0;
#X connect 12 0 6 1;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X connect 17 0 20 1;
#X connect 18 0 20 0;
#X connect 20 0 7 0;
#X restore 57 76 pd switch;
#N canvas 85 205 576 334 break 0;
#X obj 34 74 pack f 20;
#X obj 34 96 line~;
#X obj 34 52 r osc1-brk;
#X obj 112 128 r~ brk1;
#X obj 34 260 outlet~;
#X obj 34 238 clip~ 0 1;
#X obj 112 191 *~;
#X obj 226 131 pack f 20;
#X obj 226 153 line~;
#X obj 49 150 *~ -1;
#X obj 49 172 +~ 1;
#X obj 34 197 *~;
#X obj 127 170 *~;
#X text 136 188 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 246 77 loadbang;
#X msg 246 99 0;
#X text 271 100 start off with no connection;
#X obj 307 31 r patchUpdate;
#X obj 226 31 r reactivate;
#X text 315 53 [param_on-off] argument is outlet number;
#X obj 226 53 param_on-off 4;
#X connect 0 0 1 0;
#X connect 1 0 12 0;
#X connect 1 0 11 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 12 1;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 5 0;
#X connect 12 0 6 1;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X connect 17 0 20 1;
#X connect 18 0 20 0;
#X connect 20 0 7 0;
#X restore 69 103 pd break;
#N canvas 234 174 574 322 risePow 0;
#X obj 21 51 pack f 20;
#X obj 21 73 line~;
#X obj 21 29 r osc1-risePow;
#X obj 99 123 r~ risePow1;
#X obj 21 262 outlet~;
#X obj 21 239 clip~ 0 1000;
#X obj 99 181 *~;
#X obj 213 121 pack f 20;
#X obj 213 143 line~;
#X obj 36 140 *~ -1;
#X obj 36 162 +~ 1;
#X obj 21 187 *~;
#X obj 114 160 *~;
#X text 123 178 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 233 67 loadbang;
#X msg 233 89 0;
#X text 258 90 start off with no connection;
#X obj 294 19 r patchUpdate;
#X obj 213 19 r reactivate;
#X text 302 41 [param_on-off] argument is outlet number;
#X obj 213 41 param_on-off 5;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 1 0 12 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 12 1;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 5 0;
#X connect 12 0 6 1;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X connect 17 0 20 1;
#X connect 18 0 20 0;
#X connect 20 0 7 0;
#X restore 82 132 pd risePow;
#N canvas 398 218 568 300 fallPow 0;
#X obj 25 62 pack f 20;
#X obj 25 84 line~;
#X obj 25 40 r osc1-fallPow;
#X obj 103 114 r~ fallPow1;
#X obj 25 261 outlet~;
#X obj 25 238 clip~ 0 1000;
#X obj 103 174 *~;
#X obj 217 114 pack f 20;
#X obj 217 136 line~;
#X obj 40 133 *~ -1;
#X obj 40 155 +~ 1;
#X obj 25 180 *~;
#X obj 118 153 *~;
#X text 127 171 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 237 60 loadbang;
#X msg 237 82 0;
#X text 262 83 start off with no connection;
#X obj 298 10 r patchUpdate;
#X obj 217 10 r reactivate;
#X text 306 32 [param_on-off] argument is outlet number;
#X obj 217 32 param_on-off 6;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 1 0 12 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 12 1;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 5 0;
#X connect 12 0 6 1;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X connect 17 0 20 1;
#X connect 18 0 20 0;
#X connect 20 0 7 0;
#X restore 94 162 pd fallPow;
#X obj 214 168 scale-offset 1;
#X text 303 168 [scale-offset] argument is inlet number;
#X text 130 352 [switch_on-off] argument is inlet number;
#X obj 32 330 r reactivate;
#X obj 32 353 switch_on-off 1;
#X obj 119 331 r patchUpdate;
#X obj 214 144 r reactivate;
#X obj 295 145 r patchUpdate;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 2 0 3 0;
#X connect 3 0 0 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 1 1;
#X connect 10 0 0 0;
#X connect 12 0 10 0;
#X connect 13 0 10 1;
#X connect 14 0 10 2;
#X connect 15 0 10 3;
#X connect 16 0 10 4;
#X connect 17 0 10 5;
#X connect 18 0 2 0;
#X connect 18 1 4 0;
#X connect 21 0 22 0;
#X connect 22 0 9 0;
#X connect 23 0 22 1;
#X connect 24 0 18 0;
#X connect 25 0 18 1;
#X restore 102 225 pd varShapeOsc~;
#N canvas 679 253 479 318 powSine~ 0;
#X obj 32 125 *~;
#X obj 32 169 +~;
#X obj 32 191 outlet~;
#X obj 134 86 pack f 20;
#X obj 134 108 line~;
#X obj 215 86 * -1;
#X obj 215 108 + 1;
#X obj 215 130 pack f 20;
#X obj 215 152 line~;
#N canvas 308 273 565 357 freq2 0;
#X obj 32 272 +~;
#X obj 51 137 *~;
#X obj 138 98 pack f 20;
#X obj 138 120 line~;
#X obj 51 249 *~;
#X obj 209 210 pack f 20;
#X obj 209 232 line~;
#X obj 32 294 outlet~;
#X obj 51 115 r~ freqMod2;
#X obj 138 76 r osc2-fmIndex;
#X obj 32 34 r osc2-freq;
#X obj 32 56 pack f 15;
#X obj 32 78 line~;
#X obj 290 165 r patchUpdate;
#X obj 209 165 r reactivate;
#X text 298 187 [param_on-off] argument is outlet number;
#X obj 209 187 param_on-off 7;
#X connect 0 0 7 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 1 1;
#X connect 4 0 0 1;
#X connect 5 0 6 0;
#X connect 6 0 4 1;
#X connect 8 0 1 0;
#X connect 9 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 13 0 16 1;
#X connect 14 0 16 0;
#X connect 16 0 5 0;
#X restore 32 16 pd freq2;
#N canvas 276 162 517 317 phase2 0;
#X obj 141 46 pack f 20;
#X obj 141 68 line~;
#X obj 47 85 *~;
#X obj 47 200 *~;
#X obj 131 161 pack f 20;
#X obj 131 183 line~;
#X obj 47 222 outlet~;
#X obj 47 63 r~ phaseMod2;
#X obj 141 24 r osc2-pmIndex;
#X obj 212 116 r patchUpdate;
#X obj 131 116 r reactivate;
#X text 220 138 [param_on-off] argument is outlet number;
#X obj 131 138 param_on-off 8;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 3 1;
#X connect 7 0 2 0;
#X connect 8 0 0 0;
#X connect 9 0 12 1;
#X connect 10 0 12 0;
#X connect 12 0 4 0;
#X restore 47 39 pd phase2;
#X obj 32 87 powSine~;
#N canvas 478 150 644 361 pow 0;
#X obj 97 241 *~;
#X obj 211 181 pack f 20;
#X obj 211 203 line~;
#X obj 19 317 outlet~;
#X obj 97 133 r~ pow;
#X obj 19 47 r osc2-pow;
#X obj 19 69 pack f 20;
#X obj 19 91 line~;
#X obj 34 200 *~ -1;
#X obj 34 222 +~ 1;
#X obj 19 247 *~;
#X obj 112 220 *~;
#X text 121 238 if a signal is connected to this control input \, the
respective knob becomes the index of the signal;
#X obj 231 127 loadbang;
#X msg 231 149 0;
#X text 256 150 start off with no connection;
#N canvas 409 164 436 383 scale-offset 0;
#X obj 49 234 *~;
#X obj 49 273 +~;
#X obj 151 83 change;
#X obj 151 105 + 1;
#X obj 151 129 swap 1;
#X obj 151 151 /;
#X obj 151 173 t f f;
#X obj 151 195 pack f 20;
#X obj 151 217 line~;
#X obj 225 190 * -1;
#X obj 225 212 + 1;
#X obj 225 234 pack f 20;
#X obj 225 256 line~;
#X obj 280 44 loadbang;
#X msg 280 66 0;
#X obj 49 208 inlet~;
#X obj 49 295 outlet~;
#X obj 151 61 r pow_scaleOffset;
#X connect 0 0 1 0;
#X connect 1 0 16 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 9 0;
#X connect 7 0 8 0;
#X connect 8 0 0 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 1 1;
#X connect 13 0 14 0;
#X connect 14 0 3 0;
#X connect 15 0 0 0;
#X connect 17 0 2 0;
#X restore 97 157 pd scale-offset;
#X obj 292 73 r patchUpdate;
#X obj 211 73 r reactivate;
#X text 300 95 [param_on-off] argument is outlet number;
#X obj 211 95 param_on-off 9;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 2 0 11 1;
#X connect 4 0 16 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 10 0;
#X connect 7 0 11 0;
#X connect 8 0 9 0;
#X connect 9 0 10 1;
#X connect 10 0 3 0;
#X connect 11 0 0 1;
#X connect 13 0 14 0;
#X connect 14 0 1 0;
#X connect 16 0 0 0;
#X connect 17 0 20 1;
#X connect 18 0 20 0;
#X connect 20 0 1 0;
#X restore 62 62 pd pow;
#X text 82 264 turn subpatch on or off \, according to connection state
;
#X obj 32 264 switch~;
#X text 130 241 [switch_on-off] argument is inlet number;
#X obj 32 219 r reactivate;
#X obj 32 242 switch_on-off 2;
#X obj 119 219 r patchUpdate;
#X obj 134 62 scale-offset 2;
#X text 223 62 [scale-offset] argument is inlet number;
#X obj 134 38 r reactivate;
#X obj 215 39 r patchUpdate;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 0 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 1;
#X connect 9 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 0 0;
#X connect 12 0 11 2;
#X connect 16 0 17 0;
#X connect 17 0 14 0;
#X connect 18 0 17 1;
#X connect 19 0 3 0;
#X connect 19 1 5 0;
#X connect 21 0 19 0;
#X connect 22 0 19 1;
#X restore 173 246 pd powSine~;
#X obj 388 226 del;
#X obj 429 209 t f f;
#X obj 429 187 spigot;
#X obj 388 122 t f f;
#X text 361 47 when patching is deactivated \, send potentiometer values
to control ramp time for [mtx_*~];
#X obj 388 145 sel 1;
#X obj 31 83 spigot;
#X obj 361 99 t f f;
#X obj 254 66 t f f;
#X obj 31 60 t a a;
#X obj 361 77 r patchUpdate;
#X obj 429 164 r ramp;
#X msg 388 248 15;
#X text 417 242 when patching is reactivated \, delay a bang with the
potentiometer value to set [mtx_*~] back to 15ms;
#N canvas 270 112 244 223 output 0;
#X obj 48 147 dac~;
#N canvas 0 22 275 364 limit 0;
#X obj 47 66 inlet~;
#X obj 47 295 outlet~;
#X obj 47 271 hip~ 20;
#X obj 62 97 env~;
#X obj 62 122 dbtorms;
#X obj 62 169 line~;
#X obj 62 217 +~ 1;
#X obj 47 242 /~;
#X msg 62 145 \$1 10;
#X obj 62 192 lop~ 40;
#X text 53 25 Taken from chaosmonster;
#X connect 0 0 3 0;
#X connect 0 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 9 0;
#X connect 6 0 7 1;
#X connect 7 0 2 0;
#X connect 8 0 5 0;
#X connect 9 0 6 0;
#X restore 48 65 pd limit;
#X obj 48 37 inlet~;
#X obj 69 87 inlet~;
#N canvas 0 22 275 364 limit 0;
#X obj 47 66 inlet~;
#X obj 47 295 outlet~;
#X obj 47 271 hip~ 20;
#X obj 62 97 env~;
#X obj 62 122 dbtorms;
#X obj 62 169 line~;
#X obj 62 217 +~ 1;
#X obj 47 242 /~;
#X msg 62 145 \$1 10;
#X obj 62 192 lop~ 40;
#X text 53 25 Taken from chaosmonster;
#X connect 0 0 3 0;
#X connect 0 0 7 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 9 0;
#X connect 6 0 7 1;
#X connect 7 0 2 0;
#X connect 8 0 5 0;
#X connect 9 0 6 0;
#X restore 69 112 pd limit;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 0 1;
#X restore 337 314 pd output;
#X obj 462 139 == 0;
#X obj 58 161 print;
#X obj 58 138 spigot;
#X obj 91 118 tgl 15 0 empty empty debug 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 0 22 450 278 (subpatch) 0;
#X array array1 512 float 2;
#X coords 0 1 511 -1 200 140 1;
#X restore 557 84 graph;
#X obj 438 336 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 438 356 metro 100;
#X obj 438 378 tabwrite~ array1;
#X obj 31 37 inlet;
#N canvas 229 224 983 377 whole-matrix-and-data-diffusion 0;
#X obj 13 22 inlet;
#X obj 13 318 outlet;
#X text 68 255 matrix MUST have same dimensions as [mtx_*~];
#X obj 462 61 list split 2;
#X msg 496 131 symbol node\$1;
#X obj 496 86 unpack;
#X obj 496 197 s;
#X text 542 60 get inlet number and connection state;
#X obj 124 318 mtx_print;
#X obj 13 279 t a a;
#X obj 124 296 spigot;
#X obj 157 277 tgl 15 0 empty empty debug 17 7 0 10 -262144 -1 -1 0
1;
#X text 19 222 constantly updated matrix that is output only when the
patching update is being REactivated;
#X obj 496 175 f;
#X obj 496 153 t b s;
#X obj 53 72 inlet;
#X text 91 96 bang matrix when patching update is reactivated;
#X obj 462 230 list split 1;
#X obj 529 109 t f f;
#X obj 496 332 s;
#X obj 496 310 f;
#X obj 496 288 t b s;
#X msg 496 253 symbol param\$1;
#X obj 13 44 t a a;
#X obj 53 95 sel 1;
#X text 543 229 get outlet number;
#X text 541 77 and send connection state to corresponding "module"
to control [switch~];
#X text 532 284 send connection state to corresponding subpatch of
corresponding "module" to turn a control signal on or off;
#X obj 13 257 mtx 12 4;
#X obj 53 117 t b b;
#X obj 80 139 s reactivate;
#X text 90 122 and bang subpatches of nodes to update on-off states
;
#X text 581 131 [r node\$1] is in the switch_on-off subpatch in each
node;
#X text 588 247 [r param\$1] are in the parameters subpatches of each
node inside the of-off subpatch;
#X obj 80 163 r matrix;
#X obj 80 185 mtx_zeros 12 4;
#X text 136 164 zero the matrix in case the Teensy goes crazy;
#X connect 0 0 23 0;
#X connect 3 0 17 0;
#X connect 3 1 5 0;
#X connect 4 0 14 0;
#X connect 5 0 4 0;
#X connect 5 1 18 0;
#X connect 9 0 1 0;
#X connect 9 1 10 0;
#X connect 10 0 8 0;
#X connect 11 0 10 1;
#X connect 13 0 6 0;
#X connect 14 0 13 0;
#X connect 14 1 6 1;
#X connect 15 0 24 0;
#X connect 17 1 22 0;
#X connect 18 0 13 1;
#X connect 18 1 20 1;
#X connect 20 0 19 0;
#X connect 21 0 20 0;
#X connect 21 1 19 1;
#X connect 22 0 21 0;
#X connect 23 0 28 0;
#X connect 23 1 3 0;
#X connect 24 0 29 0;
#X connect 28 0 9 0;
#X connect 29 0 28 0;
#X connect 29 1 30 0;
#X connect 34 0 35 0;
#X connect 35 0 28 0;
#X restore 80 93 pd whole-matrix-and-data-diffusion;
#X obj 31 279 mtx_mul~ 12 4 15 ...........................................
;
#X connect 1 0 31 3;
#X connect 1 1 31 4;
#X connect 3 0 31 0;
#X connect 3 1 23 0;
#X connect 4 0 31 1;
#X connect 5 0 31 2;
#X connect 6 0 18 0;
#X connect 7 0 6 1;
#X connect 7 1 31 5;
#X connect 8 0 7 0;
#X connect 9 0 11 0;
#X connect 9 1 21 0;
#X connect 11 0 6 0;
#X connect 12 0 3 0;
#X connect 13 0 14 0;
#X connect 13 1 9 0;
#X connect 14 0 12 1;
#X connect 14 1 30 1;
#X connect 15 0 12 0;
#X connect 15 1 30 0;
#X connect 16 0 13 0;
#X connect 17 0 8 0;
#X connect 18 0 31 5;
#X connect 21 0 8 1;
#X connect 23 0 22 0;
#X connect 24 0 23 1;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 29 0 15 0;
#X connect 30 0 31 0;
#X connect 31 0 0 0;
#X connect 31 1 0 1;
#X connect 31 2 0 2;
#X connect 31 3 0 3;
#X connect 31 4 0 4;
#X connect 31 5 0 5;
#X connect 31 6 2 0;
#X connect 31 7 2 1;
#X connect 31 8 2 2;
#X connect 31 9 20 0;
#X connect 31 10 20 1;
#X connect 31 11 20 1;
#X connect 31 11 20 0;
#X connect 31 11 28 0;
#X restore 45 231 pd audio-engine;
#X text 44 94 check serial devices;
#X floatatom 112 133 5 0 0 0 - - -, f 5;
#X text 110 118 open serial port;
#X obj 44 70 declare -path ./abstractions;
#X obj 44 8 cnv 15 80 30 empty empty empty 20 12 0 14 -228485 -66577
0;
#N canvas 287 61 450 300 readme 0;
#X text 36 10 Things you need to check in order for this patch to work
properly along with its Arduino sketch.;
#X text 36 50 In the [pd receivedData] subpatch \, make sure the [v
outlets] and [ v inlets] variables contain the correct number of outlets
and inlets of [mtx_*~]. Check the [pd tables] subpatch and make sure
the tables contain the data dectribed in [pd receivedData] and that
they have the appropriate size ("previous_states\$1" tables must have
the size of the number of inlets of [mtx_*~] and they must be as many
as the outlets.;
#X text 40 171 In case the Teensy goes crazy and starts reading connections
that are not there \, there is a "zero-previous_states" subpatch in
the comparison-tables subpatch so you can reset them along with [mtx].
;
#X restore 55 15 pd readme;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 2 0 0 2;
#X connect 3 0 5 0;
#X connect 7 0 0 1;
